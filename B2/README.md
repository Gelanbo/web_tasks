更新网页留言板
====
8.13 更新：<br>
1 修改注册时密码明文问题；<br>
2 增加了退出登录功能，可以在个人页面点击退出，退出后设置返回登录页面按钮；<br>
3 在三个路由处增加了登录状态的判断；<br>
4 在添加留言时仍然需要输入作者。按照任务要求，保持与B1相同数据格式，用户名与作者不是同一概念，添加留言时，系统自动填写的是用户名，而作者仍然需要输入。所以显示的留言格式中，保留B1任务的作者，同时在最后增加用户名这一项。（所以比较疑惑，任务中为什么不把“作者”这一字段修改为“用户名”）；<br>
5 修改注册的post请求；<br>
6 已将activerecord连接，表的创建，model的定义等放入新的database.rb文件中；<br>
7 content长度的判断是要给@result赋值，作为显示给用户的结果。<br>
———————————————————————————————————————————————————<br>
8.11 更新：<br>
1 添加配置文件t.yml，其中可以设置本地mysql用户名及密码，同时设置用户表和留言表的存放数据库的库名；<br>
2 test.rb增加创建用户表users和留言表messagetbls的代码，两张表将存入配置文件中所设置的数据库；<br>
3 数据验证启用了validate，在用户表和留言表插入记录前会做验证判断。<br>
———————————————————————————————————————————————————<br>
一、更新message.rb文件：<br>1 删除两个全局变量的使用，将原来这两个变量的使用放入Manager类中，作为实例变量使用，保持对应功能不变；<br>2 调整了find_message()方法，加入按照用户名username筛选留言的功能；
<br><br>
二、更新test.rb文件：<br>1 启用session，链接数据库Test中的users数据表和messagetbl数据表，分别用于存放用户和留言信息；<br>
2 为了便于程序测试的部分，在循环生成10条留言的基础上，增加循环生成10个用户信息，并将用户和留言信息存入数据表的功能；<br>
3 修改get '/'路由，该路由用于初始时登录状态的判断，登陆状态时转至首页，非登录状态时转至登陆页面'/login'；<br>
4 新增post '/login'路由，用于验证用户登陆数据，正确时进入首页；<br>
5 新增get '/signup'路由用于设置注册页面，post '/'路由用于注册操作；<br>
6 新增get '/start'路由，作为登陆后首页，修改了模板文件table.erb，显示了当前在线用户的用户名，以及所有用户的留言，留言最后的一个数据是新增的用户名；在该页面上，当前登陆用户已经发表的留言才可以实现“删除”和“编辑留言”操作，其他用户的留言，该用户无法操作，所以测试此功能时，先“添加留言”，新添加的留言属于该用户自己，这些留言后会有相应操作按钮；
通过“添加留言”按钮，用户可以发表新留言，用户名为当前登陆用户的用户名；点击“个人页面”按钮，用户将进入到个人页面（myzone.erb），该页面显示用户的用户名，ID以及该用户发表的留言，并设置了“修改密码”按钮，在新页面上可以修改密码，修改密码时需要先验证原密码是否正确,提交后显示修改结果。
<br>
7 由于未创建存放用户数据的数组，用户信息直接与数据库中的数据表相连，因为sha1和md5无法解密，加密后数据表信息无法使用，所以尝试后选择不使用密码的单向加密。<br><br>
三、新增的erb文件：<br>
login.erb 登陆页面，有“注册新用户”按钮，可以转至注册页面；<br>
fail.erb 登陆失败时的提示信息，设置返回登陆页面按钮；<br>
signup.erb 注册页面，提交后会判断用户名的存在性，显示注册结果；<br>
regist_result.erb 显示注册结果，注册提交后会检验用户名是否已经存在，在新页面显示注册结果，成功时设置返回登陆页面按钮，失败时设置返回注册页面按钮；<br>
myzone.erb 个人页面，用于显示个人信息，当前用户留言，以及提供“修改密码”的入口；<br>
updatepassord.erb 修改密码页面，要求输入原密码和新密码，提交后验证原密码的正确性，正确时成功修改密码，并在用户表中更改为新的password值；<br>
updateresult.erb 显示密码修改结果（原密码错误或修改成功），原密码输入错误时设置返回“修改密码”页面，修改成功后退出登录，要求用户重新登录，并设置转到登陆页面按钮。
